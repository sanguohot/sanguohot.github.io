(function i(s,u,a){function f(r,t){if(!u[r]){if(!s[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=u[r]={exports:{}};s[r][0].call(o.exports,function(t){var e=s[r][1][t];return f(e||t)},o,o.exports,i,s,u,a)}return u[r].exports}for(var c="function"==typeof require&&require,t=0;t<a.length;t++)f(a[t]);return f})({1:[function(t,e,r){var n,o=t("util");if(function(){n=this}(),"undefined"!=typeof cc&&cc&&cc.sys&&cc.sys.isNative){var i=cc;n.console=i,cc.formatStr=o.format}var s=t("events").EventEmitter;n.EventEmitter=s;var u=t("pomelo-protobuf");n.protobuf=u;var a=t("pomelo-protocol");n.Protocol=a;var f=t("pomelo-jsclient-websocket");n.pomelo=f},{events:6,"pomelo-jsclient-websocket":11,"pomelo-protobuf":17,"pomelo-protocol":19,util:10}],2:[function(t,e,r){var n=t("base64-js"),i=t("ieee754"),u=t("is-array");r.Buffer=c,r.SlowBuffer=function t(e,r){if(!(this instanceof t))return new t(e,r);var n=new c(e,r);delete n.parent;return n},r.INSPECT_MAX_BYTES=50,c.poolSize=8192;var a=1073741823,f={};function c(t,e){var r=this;if(!(r instanceof c))return new c(t,e);var n,o,i,s=typeof t;if("number"===s)n=+t;else if("string"===s)n=c.byteLength(t,e);else{if("object"!==s||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&u(t.data)&&(t=t.data),n=+t.length}if(a<n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");if(n<0?n=0:n>>>=0,c.TYPED_ARRAY_SUPPORT?r=c._augment(new Uint8Array(n)):(r.length=n,r._isBuffer=!0),c.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)r._set(t);else if(u(i=t)||c.isBuffer(i)||i&&"object"==typeof i&&"number"==typeof i.length)if(c.isBuffer(t))for(o=0;o<n;o++)r[o]=t.readUInt8(o);else for(o=0;o<n;o++)r[o]=(t[o]%256+256)%256;else if("string"===s)r.write(t,0,e);else if("number"===s&&!c.TYPED_ARRAY_SUPPORT)for(o=0;o<n;o++)r[o]=0;return 0<n&&n<=c.poolSize&&(r.parent=f),r}function y(t,e,r,n){return P(function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function o(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function s(t,e,r){var n="",o="";r=Math.min(t.length,r);for(var i=e;i<r;i++)t[i]<=127?(n+=B(o)+String.fromCharCode(t[i]),o=""):o+="%"+t[i].toString(16);return n+B(o)}function l(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;o++)n+=String.fromCharCode(127&t[o]);return n}function h(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;o++)n+=String.fromCharCode(t[o]);return n}function p(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||n<r)&&(r=n);for(var o="",i=e;i<r;i++)o+=S(t[i]);return o}function d(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function g(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function v(t,e,r,n,o,i){if(!c.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(o<e||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function w(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;o++)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function E(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;o++)t[r+o]=e>>>8*(n?o:3-o)&255}function b(t,e,r,n,o,i){if(o<e||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function m(t,e,r,n,o){return o||b(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),i.write(t,e,r,n,23,4),r+4}function _(t,e,r,n,o){return o||b(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),i.write(t,e,r,n,52,8),r+8}c.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(t){return!1}}(),c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i&&t[o]===e[o];o++);return o!==i&&(r=t[o],n=e[o]),r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!u(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new c(0);if(1===t.length)return t[0];var r;if(void 0===e)for(r=e=0;r<t.length;r++)e+=t[r].length;var n=new c(e),o=0;for(r=0;r<t.length;r++){var i=t[r];i.copy(n,o),o+=i.length}return n},c.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=T(t).length;break;case"base64":r=U(t).length;break;default:r=t.length}return r},c.prototype.length=void 0,c.prototype.parent=void 0,c.prototype.toString=function(t,e,r){var n=!1;if(t||(t="utf8"),(e>>>=0)<0&&(e=0),(r=void 0===r||r===1/0?this.length:r>>>0)>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return p(this,e,r);case"utf8":case"utf-8":return s(this,e,r);case"ascii":return l(this,e,r);case"binary":return h(this,e,r);case"base64":return o(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:c.compare(this,t)},c.prototype.indexOf=function(t,e){if(2147483647<e?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(c.isBuffer(t))return r(this,t,e);if("number"==typeof t)return c.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);function r(t,e,r){for(var n=-1,o=0;r+o<t.length;o++)if(t[r+o]===e[-1===n?0:o-n]){if(-1===n&&(n=o),o-n+1===e.length)return r+n}else n=-1;return-1}throw new TypeError("val must be string, number or Buffer")},c.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},c.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},c.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var o=n;n=e,e=r,r=o}if(e=Number(e)||0,r<0||e<0||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var i,s,u,a,f,c,l,h,p,d,g=this.length-e;switch(r?g<(r=Number(r))&&(r=g):r=g,n=String(n||"utf8").toLowerCase()){case"hex":i=function(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?o<(n=Number(n))&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new Error("Invalid hex string");i/2<n&&(n=i/2);for(var s=0;s<n;s++){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+s]=u}return s}(this,t,e,r);break;case"utf8":case"utf-8":p=e,d=r,i=P(T(t,(h=this).length-p),h,p,d);break;case"ascii":i=y(this,t,e,r);break;case"binary":i=y(this,t,e,r);break;case"base64":f=this,c=e,l=r,i=P(U(t),f,c,l);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":u=e,a=r,i=P(function(t,e){for(var r,n,o,i=[],s=0;s<t.length&&!((e-=2)<0);s++)r=t.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,(s=this).length-u),s,u,a);break;default:throw new TypeError("Unknown encoding: "+n)}return i},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)r=c._augment(this.subarray(t,e));else{var o=e-t;r=new c(o,void 0);for(var i=0;i<o;i++)r[i]=this[i+t]}return r.length&&(r.parent=this.parent||this),r},c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||g(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||g(t,e,this.length);for(var n=this[t+--e],o=1;0<e&&(o*=256);)n+=this[t+--e]*o;return n},c.prototype.readUInt8=function(t,e){return e||g(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||g(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||g(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||g(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||g(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||g(t,e,this.length);for(var n=e,o=1,i=this[t+--n];0<n&&(o*=256);)i+=this[t+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||g(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||g(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){e||g(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return e||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||g(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||g(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||g(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||g(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||v(this,t,e,r,Math.pow(2,8*r),0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o>>>0&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||v(this,t,e,r,Math.pow(2,8*r),0);var o=r-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i>>>0&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):w(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):w(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):E(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):E(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,r,n){t=+t,e>>>=0,n||v(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var o=0,i=1,s=t<0?1:0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=(t/i>>0)-s&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){t=+t,e>>>=0,n||v(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var o=r-1,i=1,s=t<0?1:0;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=(t/i>>0)-s&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):w(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):w(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):E(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||v(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):E(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,r){return m(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return m(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return _(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return _(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o=n-r;if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(var i=0;i<o;i++)t[i+e]=this[i+r];else t._set(this.subarray(r,r+o),e);return o},c.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var o=T(t.toString()),i=o.length;for(n=e;n<r;n++)this[n]=o[n%i]}return this}},c.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(c.TYPED_ARRAY_SUPPORT)return new c(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var I=c.prototype;c._augment=function(t){return t.constructor=c,t._isBuffer=!0,t._set=t.set,t.get=I.get,t.set=I.set,t.write=I.write,t.toString=I.toString,t.toLocaleString=I.toString,t.toJSON=I.toJSON,t.equals=I.equals,t.compare=I.compare,t.indexOf=I.indexOf,t.copy=I.copy,t.slice=I.slice,t.readUIntLE=I.readUIntLE,t.readUIntBE=I.readUIntBE,t.readUInt8=I.readUInt8,t.readUInt16LE=I.readUInt16LE,t.readUInt16BE=I.readUInt16BE,t.readUInt32LE=I.readUInt32LE,t.readUInt32BE=I.readUInt32BE,t.readIntLE=I.readIntLE,t.readIntBE=I.readIntBE,t.readInt8=I.readInt8,t.readInt16LE=I.readInt16LE,t.readInt16BE=I.readInt16BE,t.readInt32LE=I.readInt32LE,t.readInt32BE=I.readInt32BE,t.readFloatLE=I.readFloatLE,t.readFloatBE=I.readFloatBE,t.readDoubleLE=I.readDoubleLE,t.readDoubleBE=I.readDoubleBE,t.writeUInt8=I.writeUInt8,t.writeUIntLE=I.writeUIntLE,t.writeUIntBE=I.writeUIntBE,t.writeUInt16LE=I.writeUInt16LE,t.writeUInt16BE=I.writeUInt16BE,t.writeUInt32LE=I.writeUInt32LE,t.writeUInt32BE=I.writeUInt32BE,t.writeIntLE=I.writeIntLE,t.writeIntBE=I.writeIntBE,t.writeInt8=I.writeInt8,t.writeInt16LE=I.writeInt16LE,t.writeInt16BE=I.writeInt16BE,t.writeInt32LE=I.writeInt32LE,t.writeInt32BE=I.writeInt32BE,t.writeFloatLE=I.writeFloatLE,t.writeFloatBE=I.writeFloatBE,t.writeDoubleLE=I.writeDoubleLE,t.writeDoubleBE=I.writeDoubleBE,t.fill=I.fill,t.inspect=I.inspect,t.toArrayBuffer=I.toArrayBuffer,t};var A=/[^+\/0-9A-z\-]/g;function S(t){return t<16?"0"+t.toString(16):t.toString(16)}function T(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;s++){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(e-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(e-=3)&&i.push(239,191,189),o=r;continue}r=o-55296<<10|r-56320|65536,o=null}else o&&(-1<(e-=3)&&i.push(239,191,189),o=null);if(r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<2097152))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function U(t){return n.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(A,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function P(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}function B(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}},{"base64-js":3,ieee754:4,"is-array":5}],3:[function(t,e,r){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(t){"use strict";var c="undefined"!=typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),n="/".charCodeAt(0),o="0".charCodeAt(0),i="a".charCodeAt(0),s="A".charCodeAt(0),u="-".charCodeAt(0),a="_".charCodeAt(0);function l(t){var e=t.charCodeAt(0);return e===r||e===u?62:e===n||e===a?63:e<o?-1:e<o+10?e-o+26+26:e<s+26?e-s:e<i+26?e-i+26:void 0}t.toByteArray=function(t){var e,r,n,o,i,s;if(0<t.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;i="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,s=new c(3*t.length/4-i),n=0<i?t.length-4:t.length;var a=0;function f(t){s[a++]=t}for(r=e=0;e<n;e+=4,r+=3)f((16711680&(o=l(t.charAt(e))<<18|l(t.charAt(e+1))<<12|l(t.charAt(e+2))<<6|l(t.charAt(e+3))))>>16),f((65280&o)>>8),f(255&o);return 2===i?f(255&(o=l(t.charAt(e))<<2|l(t.charAt(e+1))>>4)):1===i&&(f((o=l(t.charAt(e))<<10|l(t.charAt(e+1))<<4|l(t.charAt(e+2))>>2)>>8&255),f(255&o)),s},t.fromByteArray=function(t){var e,r,n,o,i=t.length%3,s="";function u(t){return f.charAt(t)}for(e=0,n=t.length-i;e<n;e+=3)r=(t[e]<<16)+(t[e+1]<<8)+t[e+2],s+=u((o=r)>>18&63)+u(o>>12&63)+u(o>>6&63)+u(63&o);switch(i){case 1:s+=u((r=t[t.length-1])>>2),s+=u(r<<4&63),s+="==";break;case 2:s+=u((r=(t[t.length-2]<<8)+t[t.length-1])>>10),s+=u(r>>4&63),s+=u(r<<2&63),s+="="}return s}})(void 0===r?this.base64js={}:r)},{}],4:[function(t,e,r){r.read=function(t,e,r,n,o){var i,s,u=8*o-n-1,a=(1<<u)-1,f=a>>1,c=-7,l=r?o-1:0,h=r?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-c)-1,p>>=-c,c+=u;0<c;i=256*i+t[e+l],l+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;0<c;s=256*s+t[e+l],l+=h,c-=8);if(0===i)i=1-f;else{if(i===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=f}return(p?-1:1)*s*Math.pow(2,i-n)},r.write=function(t,e,r,n,o,i){var s,u,a,f=8*i-o-1,c=(1<<f)-1,l=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),2<=(e+=1<=s+l?h/a:h*Math.pow(2,1-l))*a&&(s++,a/=2),c<=s+l?(u=0,s=c):1<=s+l?(u=(e*a-1)*Math.pow(2,o),s+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;t[r+p]=255&u,p+=d,u/=256,o-=8);for(s=s<<o|u,f+=o;0<f;t[r+p]=255&s,p+=d,s/=256,f-=8);t[r+p-d]|=128*g}},{}],5:[function(t,e,r){var n=Array.isArray,o=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==o.call(t)}},{}],6:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function u(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function f(t){return void 0===t}((e.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,i,s;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(f(r=this._events[t]))return!1;if(u(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),i=1;i<n;i++)o[i-1]=arguments[i];r.apply(this,o)}else if(a(r)){for(n=arguments.length,o=new Array(n-1),i=1;i<n;i++)o[i-1]=arguments[i];for(n=(s=r.slice()).length,i=0;i<n;i++)s[i].apply(this,o)}return!0},n.prototype.on=n.prototype.addListener=function(t,e){var r;if(!u(e))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,u(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned)&&((r=f(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()));return this},n.prototype.once=function(t,e){if(!u(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var r,n,o,i;if(!u(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(r=this._events[t]).length,n=-1,r===e||u(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(i=o;0<i--;)if(r[i]===e||r[i].listener&&r[i].listener===e){n=i;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(u(r=this._events[t]))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?u(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){return t._events&&t._events[e]?u(t._events[e])?1:t._events[e].length:0}},{}],7:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],8:[function(t,e,r){var n=e.exports={},o=[],i=!1;function s(){if(!i){var t;i=!0;for(var e=o.length;e;){t=o,o=[];for(var r=-1;++r<e;)t[r]();e=o.length}i=!1}}function u(){}n.nextTick=function(t){o.push(t),i||setTimeout(s,0)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=u,n.addListener=u,n.once=u,n.off=u,n.removeListener=u,n.removeAllListeners=u,n.emit=u,n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],9:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],10:[function(h,t,U){(function(n,o){var u=/%[sdj%]/g;U.format=function(t){if(!b(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(a(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,i=String(t).replace(u,function(t){if("%%"===t)return"%";if(o<=r)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),s=n[r];r<o;s=n[++r])w(s)||!c(s)?i+=" "+s:i+=" "+a(s);return i},U.deprecate=function(t,e){if(m(o.process))return function(){return U.deprecate(t,e).apply(this,arguments)};if(!0===n.noDeprecation)return t;var r=!1;return function(){if(!r){if(n.throwDeprecation)throw new Error(e);n.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}};var t,i={};function a(t,e){var r={seen:[],stylize:f};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),v(e)?r.showHidden=e:e&&U._extend(r,e),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),p(r,t,r.depth)}function s(t,e){var r=a.styles[e];return r?"["+a.colors[r][0]+"m"+t+"["+a.colors[r][1]+"m":t}function f(t,e){return t}function p(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==U.inspect&&(!r.constructor||r.constructor.prototype!==r)){var t=r.inspect(n,e);return b(t)||(t=p(e,t,n)),t}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(b(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(E(e))return t.stylize(""+e,"number");if(v(e))return t.stylize(""+e,"boolean");if(w(e))return t.stylize("null","null")}(e,r);if(o)return o;var i,s=Object.keys(r),u=(i={},s.forEach(function(t,e){i[t]=!0}),i);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),A(r)&&(0<=s.indexOf("message")||0<=s.indexOf("description")))return d(r);if(0===s.length){if(S(r)){var a=r.name?": "+r.name:"";return e.stylize("[Function"+a+"]","special")}if(_(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(I(r))return e.stylize(Date.prototype.toString.call(r),"date");if(A(r))return d(r)}var f,c="",l=!1,h=["{","}"];(y(r)&&(l=!0,h=["[","]"]),S(r))&&(c=" [Function"+(r.name?": "+r.name:"")+"]");return _(r)&&(c=" "+RegExp.prototype.toString.call(r)),I(r)&&(c=" "+Date.prototype.toUTCString.call(r)),A(r)&&(c=" "+d(r)),0!==s.length||l&&0!=r.length?n<0?_(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),f=l?function(e,r,n,o,t){for(var i=[],s=0,u=r.length;s<u;++s)T(r,String(s))?i.push(g(e,r,n,o,String(s),!0)):i.push("");return t.forEach(function(t){t.match(/^\d+$/)||i.push(g(e,r,n,o,t,!0))}),i}(e,r,n,u,s):s.map(function(t){return g(e,r,n,u,t,l)}),e.seen.pop(),function(t,e,r){if(60<t.reduce(function(t,e){return 0,0<=e.indexOf("\n")&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0))return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(f,c,h)):h[0]+c+h[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function g(t,e,r,n,o,i){var s,u,a;if((a=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?u=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(u=t.stylize("[Setter]","special")),T(n,o)||(s="["+o+"]"),u||(t.seen.indexOf(a.value)<0?-1<(u=w(r)?p(t,a.value,null):p(t,a.value,r-1)).indexOf("\n")&&(u=i?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),m(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function y(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function w(t){return null===t}function E(t){return"number"==typeof t}function b(t){return"string"==typeof t}function m(t){return void 0===t}function _(t){return c(t)&&"[object RegExp]"===e(t)}function c(t){return"object"==typeof t&&null!==t}function I(t){return c(t)&&"[object Date]"===e(t)}function A(t){return c(t)&&("[object Error]"===e(t)||t instanceof Error)}function S(t){return"function"==typeof t}function e(t){return Object.prototype.toString.call(t)}function r(t){return t<10?"0"+t.toString(10):t.toString(10)}U.debuglog=function(e){if(m(t)&&(t=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!i[e])if(new RegExp("\\b"+e+"\\b","i").test(t)){var r=n.pid;i[e]=function(){var t=U.format.apply(U,arguments);console.error("%s %d: %s",e,r,t)}}else i[e]=function(){};return i[e]},(U.inspect=a).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},U.isArray=y,U.isBoolean=v,U.isNull=w,U.isNullOrUndefined=function(t){return null==t},U.isNumber=E,U.isString=b,U.isSymbol=function(t){return"symbol"==typeof t},U.isUndefined=m,U.isRegExp=_,U.isObject=c,U.isDate=I,U.isError=A,U.isFunction=S,U.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},U.isBuffer=h("./support/isBuffer");var l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}U.log=function(){var t,e;console.log("%s - %s",(t=new Date,e=[r(t.getHours()),r(t.getMinutes()),r(t.getSeconds())].join(":"),[t.getDate(),l[t.getMonth()],e].join(" ")),U.format.apply(U,arguments))},U.inherits=h("inherits"),U._extend=function(t,e){if(!e||!c(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,h("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":9,_process:8,inherits:7}],11:[function(t,G,e){(function(){var i=window.Protocol,s=window.protobuf,u=window.decodeIO_protobuf,a=null,f=null,c=i.Package,l=i.Message,t=window.EventEmitter,h=window.rsa;"undefined"!=typeof window&&"undefined"!=typeof sys&&sys.localStorage&&(window.localStorage=sys.localStorage);"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e});var e=window,p=Object.create(t.prototype);e.pomelo=p;var d,g=null,n=0,o={},y={},v={},w={},E={},b={},m={},_=0,r=0,I=0,A=0,S=null,T=null,U=null,P=null,B=null,L=!1,R=null,O=null,x=0,Y=5e3,N={sys:{type:"js-websocket",version:"0.0.1",rsa:{}},user:{}},D=null;p.init=function(t,e){D=e;var r=t.host,n=t.port;B=t.encode||k,P=t.decode||j;var o="ws://"+r;if(n&&(o+=":"+n),N.user=t.user,t.encrypt){d=!0,h.generate(1024,"10001");var i={rsa_n:h.n.toString(16),rsa_e:h.e};N.sys.rsa=i}U=t.handshakeCallback,M(t,o,e)};var j=p.decode=function(t){var e=l.decode(t);if(!(0<e.id)||(e.route=v[e.id],delete v[e.id],e.route))return e.body=K(e),e},k=p.encode=function(t,e,r){var n=t?l.TYPE_REQUEST:l.TYPE_NOTIFY;if(s&&m[e])r=s.encode(e,r);else if(a&&a.lookup(e)){r=new(a.build(e))(r).encodeNB()}else r=i.strencode(JSON.stringify(r));var o=0;return w&&w[e]&&(e=w[e],o=1),l.encode(t,n,o,e,r)},M=function(e,t,r){console.log("connect to "+t);var n=(e=e||{}).maxReconnectAttempts||10;if(O=t,window.localStorage&&window.localStorage.getItem("protos")&&0===_){var o=JSON.parse(window.localStorage.getItem("protos"));_=o.version||0,b=o.server||{},m=o.client||{},s&&s.init({encoderProtos:m,decoderProtos:b}),u&&(a=u.loadJson(m),f=u.loadJson(b))}N.sys.protoVersion=_;(g=new WebSocket(t)).binaryType="arraybuffer",g.onopen=function(t){L&&p.emit("reconnect"),C();var e=c.encode(c.TYPE_HANDSHAKE,i.strencode(JSON.stringify(N)));z(e)},g.onmessage=function(t){H(c.decode(t.data),r),I&&(A=Date.now()+I)},g.onerror=function(t){p.emit("io-error",t),console.error("socket error: ",t)},g.onclose=function(t){p.emit("close",t),p.emit("disconnect",t),e.reconnect&&x<n&&(L=!0,x++,R=setTimeout(function(){M(e,O,r)},Y),Y*=2)}};p.disconnect=function(){g&&(g.disconnect&&g.disconnect(),g.close&&g.close(),console.log("disconnect"),g=null),S&&(clearTimeout(S),S=null),T&&(clearTimeout(T),T=null)};var C=function(){L=!1,Y=5e3,x=0,clearTimeout(R)};p.request=function(t,e,r){2===arguments.length&&"function"==typeof e?(r=e,e={}):e=e||{},(t=t||e.route)&&(F(++n,t,e),o[n]=r,v[n]=t)},p.notify=function(t,e){F(0,t,e=e||{})};var F=function(t,e,r){if(d){r=JSON.stringify(r);var n=h.signString(r,"sha256");(r=JSON.parse(r)).__crypto__=n}B&&(r=B(t,e,r));var o=c.encode(c.TYPE_DATA,r);z(o)},z=function(t){g&&g.send(t.buffer)},J=function(){var t=A-Date.now();100<t?T=setTimeout(J,t):(console.error("server heartbeat timeout"),p.emit("heartbeat timeout"),p.disconnect())};y[c.TYPE_HANDSHAKE]=function(t){if(501!==(t=JSON.parse(i.strdecode(t))).code)if(200===t.code){Q(t);var e=c.encode(c.TYPE_HANDSHAKE_ACK);z(e),D&&D(g)}else p.emit("error","handshake fail");else p.emit("error","client version not fullfill")},y[c.TYPE_HEARTBEAT]=function(t){if(r){var e=c.encode(c.TYPE_HEARTBEAT);T&&(clearTimeout(T),T=null),S||(S=setTimeout(function(){S=null,z(e),A=Date.now()+I,T=setTimeout(J,I)},r))}},y[c.TYPE_DATA]=function(t){var e=t;P&&(e=P(e)),q(p,e)},y[c.TYPE_KICK]=function(t){t=JSON.parse(i.strdecode(t)),p.emit("onKick",t)};var H=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var r=t[e];y[r.type](r.body)}else y[t.type](t.body)},q=function(t,e){if(e.id){var r=o[e.id];delete o[e.id],"function"==typeof r&&r(e.body)}else t.emit(e.route,e.body)},K=function(t){var e=t.route;if(t.compressRoute){if(!E[e])return{};e=t.route=E[e]}return s&&b[e]?s.decodeStr(e,t.body):f&&f.lookup(e)?f.build(e).decode(t.body):JSON.parse(i.strdecode(t.body))},Q=function(t){t.sys&&t.sys.heartbeat?(r=1e3*t.sys.heartbeat,I=2*r):I=r=0,$(t),"function"==typeof U&&U(t.user)},$=function(t){if(t&&t.sys){w=t.sys.dict;var e=t.sys.protos;if(w)for(var r in E={},w=w)E[w[r]]=r;e&&(_=e.version||0,b=e.server||{},m=e.client||{},window.localStorage.setItem("protos",JSON.stringify(e)),s&&s.init({encoderProtos:e.client,decoderProtos:e.server}),u&&(a=u.loadJson(m),f=u.loadJson(b)))}};G.exports=p})()},{}],12:[function(t,e,r){var n=e.exports;n.encodeUInt32=function(t){var e=parseInt(t);if(isNaN(e)||e<0)return console.log(e),null;var r=[];do{var n=e%128,o=Math.floor(e/128);0!==o&&(n+=128),r.push(n),e=o}while(0!==e);return r},n.encodeSInt32=function(t){var e=parseInt(t);return isNaN(e)?null:(e=e<0?2*Math.abs(e)-1:2*e,n.encodeUInt32(e))},n.decodeUInt32=function(t){for(var e=0,r=0;r<t.length;r++){var n=parseInt(t[r]);if(e+=(127&n)*Math.pow(2,7*r),n<128)return e}return e},n.decodeSInt32=function(t){var e=this.decodeUInt32(t);return e=(e%2+e)/2*(e%2==1?-1:1)}},{}],13:[function(t,e,r){e.exports={TYPES:{uInt32:0,sInt32:0,int32:0,double:1,string:2,message:2,float:5}}},{}],14:[function(t,e,r){var a,f=t("./codec"),i=t("./util"),c=e.exports,l=0;function h(t,e,r){for(;l<r;){var n=(void 0,{type:7&(s=f.decodeUInt32(d())),tag:s>>3}),o=n.tag,i=e.__tags[o];switch(e[i].option){case"optional":case"required":t[i]=u(e[i].type,e);break;case"repeated":t[i]||(t[i]=[]),p(t[i],e[i].type,e)}}var s;return t}function u(t,e){switch(t){case"uInt32":return f.decodeUInt32(d());case"int32":case"sInt32":return f.decodeSInt32(d());case"float":var r=a.readFloatLE(l);return l+=4,r;case"double":var n=a.readDoubleLE(l);return l+=8,n;case"string":var o=f.decodeUInt32(d()),i=a.toString("utf8",l,l+o);return l+=o,i;default:var s=e&&(e.__messages[t]||c.protos["message "+t]);if(s){o=f.decodeUInt32(d());var u={};return h(u,s,l+o),u}}}function p(t,e,r){if(i.isSimpleType(e))for(var n=f.decodeUInt32(d()),o=0;o<n;o++)t.push(u(e));else t.push(u(e,r))}function d(t){var e=[],r=l;t=t||!1;do{var n=a.readUInt8(r);e.push(n),r++}while(128<=n);return t||(l=r),e}c.init=function(t){this.protos=t||{}},c.setProtos=function(t){t&&(this.protos=t)},c.decode=function(t,e){var r=this.protos[t];return a=e,l=0,r?h({},r,a.length):null}},{"./codec":12,"./util":18}],15:[function(t,e,r){(function(a){var f=t("./codec"),n=t("./constant"),s=t("./util"),c=e.exports;function l(t,e,r,n){for(var o in n)if(r[o]){var i=r[o];switch(i.option){case"required":case"optional":e=p(t,e,d(i.type,i.tag)),e=u(n[o],i.type,e,t,r);break;case"repeated":n[o]&&0<n[o].length&&(e=h(n[o],i,e,t,r))}}return e}function u(t,e,r,n,o){var i=0;switch(e){case"uInt32":r=p(n,r,f.encodeUInt32(t));break;case"int32":case"sInt32":r=p(n,r,f.encodeSInt32(t));break;case"float":n.writeFloatLE(t,r),r+=4;break;case"double":n.writeDoubleLE(t,r),r+=8;break;case"string":i=a.byteLength(t),r=p(n,r,f.encodeUInt32(i)),n.write(t,r,i),r+=i;break;default:var s=o.__messages[e]||c.protos["message "+e];if(s){var u=new a(2*a.byteLength(JSON.stringify(t)));i=l(u,i=0,s,t),r=p(n,r,f.encodeUInt32(i)),u.copy(n,r,0,i),r+=i}}return r}function h(t,e,r,n,o){var i=0;if(s.isSimpleType(e.type))for(r=p(n,r=p(n,r,d(e.type,e.tag)),f.encodeUInt32(t.length)),i=0;i<t.length;i++)r=u(t[i],e.type,r,n);else for(i=0;i<t.length;i++)r=p(n,r,d(e.type,e.tag)),r=u(t[i],e.type,r,n,o);return r}function p(t,e,r){for(var n=0;n<r.length;n++)t.writeUInt8(r[n],e),e++;return e}function d(t,e){var r=n.TYPES[t];return void 0===r&&(r=2),f.encodeUInt32(e<<3|r)}c.init=function(t){this.protos=t||{}},c.encode=function(t,e){if(!t||!e)return console.warn("Route or msg can not be null! route : %j, msg %j",t,e),null;var r=this.protos[t];if(!function t(e,r){if(!r||!e)return console.warn("no protos or msg exist! msg : %j, protos : %j",e,r),!1;for(var n in r){var o=r[n];switch(o.option){case"required":if(void 0===e[n])return console.warn("no property exist for required! name: %j, proto: %j, msg: %j",n,o,e),!1;case"optional":if(void 0!==e[n]){var i=r.__messages[o.type]||c.protos["message "+o.type];if(i&&!t(e[n],i))return console.warn("inner proto error! name: %j, proto: %j, msg: %j",n,o,e),!1}break;case"repeated":var i=r.__messages[o.type]||c.protos["message "+o.type];if(e[n]&&i)for(var s=0;s<e[n].length;s++)if(!t(e[n][s],i))return!1}}return!0}(e,r))return console.warn("check msg failed! msg : %j, proto : %j",e,r),null;var n=2*a.byteLength(JSON.stringify(e)),o=new a(n),i=0;return r&&0<(i=l(o,i,r,e))?o.slice(0,i):null}}).call(this,t("buffer").Buffer)},{"./codec":12,"./constant":13,"./util":18,buffer:2}],16:[function(t,e,r){function u(t){var e={},r={},n={};for(var o in t){var i=t[o],s=o.split(" ");switch(s[0]){case"message":if(2!==s.length)continue;r[s[1]]=u(i);continue;case"required":case"optional":case"repeated":if(3!==s.length||n[i])continue;e[s[2]]={option:s[0],type:s[1],tag:i},n[i]=s[2]}}return e.__messages=r,e.__tags=n,e}e.exports.parse=function(t){var e={};for(var r in t)e[r]=u(t[r]);return e}},{}],17:[function(t,s,e){(function(o){var r=t("./encoder"),n=t("./decoder"),e=t("./parser"),i=s.exports;i.encode=function(t,e){return r.encode(t,e)},i.encode2Bytes=function(t,e){var r=this.encode(t,e);if(!r||!r.length)return console.warn("encode msg failed! key : %j, msg : %j",t,e),null;for(var n=new Uint8Array(r.length),o=0;o<r.length;o++)n[o]=r.readUInt8(o);return n},i.encodeStr=function(t,e,r){r=r||"base64";var n=i.encode(t,e);return n?n.toString(r):n},i.decode=function(t,e){return n.decode(t,e)},i.decodeStr=function(t,e,r){var n=new o(e,r=r||"base64");return n?i.decode(t,n):n},i.parse=function(t){return e.parse(t)},i.setEncoderProtos=function(t){r.init(t)},i.setDecoderProtos=function(t){n.init(t)},i.init=function(t){r.init(t.encoderProtos),n.init(t.decoderProtos)}}).call(this,t("buffer").Buffer)},{"./decoder":14,"./encoder":15,"./parser":16,buffer:2}],18:[function(t,e,r){var i=e.exports;i.isSimpleType=function(t){return"uInt32"===t||"sInt32"===t||"int32"===t||"uInt64"===t||"sInt64"===t||"float"===t||"double"===t},i.equal=function(t,e){for(var r in t){var n=t[r],o=e[r];if("object"==typeof n){if(!i.equal(n,o))return!1}else if(n!==o)return!1}return!0}},{}],19:[function(t,e,r){e.exports=t("./lib/protocol")},{"./lib/protocol":20}],20:[function(t,n,e){(function(p){(function(t,d,e){var g=t,r=g.Package={},o=g.Message={};r.TYPE_HANDSHAKE=1,r.TYPE_HANDSHAKE_ACK=2,r.TYPE_HEARTBEAT=3,r.TYPE_DATA=4,r.TYPE_KICK=5,o.TYPE_REQUEST=0,o.TYPE_NOTIFY=1,o.TYPE_RESPONSE=2,o.TYPE_PUSH=3,g.strencode=function(t){if(void 0!==p&&d===p)return new p(t);for(var e=new d(3*t.length),r=0,n=0;n<t.length;n++){var o=t.charCodeAt(n),i=null;i=o<=127?[o]:o<=2047?[192|o>>6,128|63&o]:[224|o>>12,128|(4032&o)>>6,128|63&o];for(var s=0;s<i.length;s++)e[r]=i[s],++r}var u=new d(r);return y(u,0,e,0,r),u},g.strdecode=function(t){if(void 0!==p&&d===p)return t.toString();for(var e=new d(t),r=[],n=0,o=0,i=e.length;n<i;)e[n]<128?(o=e[n],n+=1):e[n]<224?(o=((31&e[n])<<6)+(63&e[n+1]),n+=2):(o=((15&e[n])<<12)+((63&e[n+1])<<6)+(63&e[n+2]),n+=3),r.push(o);return String.fromCharCode.apply(null,r)},r.encode=function(t,e){var r=e?e.length:0,n=new d(4+r),o=0;return n[o++]=255&t,n[o++]=r>>16&255,n[o++]=r>>8&255,n[o++]=255&r,e&&y(n,4,e,0,r),n},r.decode=function(t){for(var e=0,r=new d(t),n=0,o=[];e<r.length;){var i=r[e++],s=(n=(r[e++]<<16|r[e++]<<8|r[e++])>>>0)?new d(n):null;s&&y(s,0,r,e,n),e+=n,o.push({type:i,body:s})}return 1===o.length?o[0]:o},o.encode=function(t,e,r,n,o){var i=1+(v(e)?a(t):0);if(w(e))if(r){if("number"!=typeof n)throw new Error("error flag for number route!");i+=2}else if(i+=1,n){if(255<(n=g.strencode(n)).length)throw new Error("route maxlength is overflow");i+=n.length}o&&(i+=o.length);var s=new d(i),u=0;return u=f(e,r,s,u),v(e)&&(u=c(t,s,u)),w(e)&&(u=l(r,n,s,u)),o&&(u=h(o,s,u)),s},o.decode=function(t){var e=new d(t),r=e.length||e.byteLength,n=0,o=0,i=null,s=e[n++],u=1&s,a=s>>1&7;if(v(a))for(var f=0,c=0;o+=(127&(f=parseInt(e[n])))<<7*c,n++,c++,128<=f;);if(w(a))if(u)i=e[n++]<<8|e[n++];else{var l=e[n++];l?(i=new d(l),y(i,0,e,n,l),i=g.strdecode(i)):i="",n+=l}var h=r-n,p=new d(h);return y(p,0,e,n,h),{id:o,type:a,compressRoute:u,route:i,body:p}};var y=function(t,e,r,n,o){if("function"==typeof r.copy)r.copy(t,e,n,n+o);else for(var i=0;i<o;i++)t[e++]=r[n++]},v=function(t){return t===o.TYPE_REQUEST||t===o.TYPE_RESPONSE},w=function(t){return t===o.TYPE_REQUEST||t===o.TYPE_NOTIFY||t===o.TYPE_PUSH},a=function(t){for(var e=0;e+=1,0<(t>>=7););return e},f=function(t,e,r,n){if(t!==o.TYPE_REQUEST&&t!==o.TYPE_NOTIFY&&t!==o.TYPE_RESPONSE&&t!==o.TYPE_PUSH)throw new Error("unkonw message type: "+t);return r[n]=t<<1|(e?1:0),n+1},c=function(t,e,r){do{var n=t%128,o=Math.floor(t/128);0!==o&&(n+=128),e[r++]=n,t=o}while(0!==t);return r},l=function(t,e,r,n){if(t){if(65535<e)throw new Error("route number is overflow");r[n++]=e>>8&255,r[n++]=255&e}else e?(r[n++]=255&e.length,y(r,n,e,0,e.length),n+=e.length):r[n++]=0;return n},h=function(t,e,r){return y(e,r,t,0,t.length),r+t.length};n.exports=g,"undefined"!=typeof window&&(window.Protocol=g)})("undefined"==typeof window?n.exports:this.Protocol={},"undefined"==typeof window?p:Uint8Array)}).call(this,t("buffer").Buffer)},{buffer:2}]},{},[1]);